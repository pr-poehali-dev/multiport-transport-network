# Правила дизайна TransHub

## Утверждённые элементы дизайна

### Сайдбар (Sidebar)
- Ширина: `w-64` (256px)
- Фон: `bg-[#1a1a1a]` (тёмный)
- Текст: `text-white`
- Фиксированная позиция при прокрутке (`flex-shrink-0`)
- Логотип в синей плашке `bg-[#0ea5e9]`
- Активный пункт меню: `bg-[#0ea5e9]` (основной и подпункты)
- Неактивный пункт: `text-white/80 hover:bg-white/5`
- Подменю с отступом `ml-9`

#### Поведение меню
- При выборе подпункта из другого раздела, предыдущий раздел автоматически закрывается
- Только один раздел с подменю может быть открыт одновременно
- При выборе любого пункта меню на мобильных/планшетах, сайдбар автоматически скрывается (`setSidebarOpen(false)`)

### Топбар (Header)
- **Компонент**: `TopBar.tsx` — универсальный компонент для всех страниц
- Фиксированная позиция: `sticky top-0 z-10`
- Фон: `bg-white`
- Бордер: `border-b border-border`
- Отступы: `px-4 lg:px-6 py-4`
- Заголовок: `text-base lg:text-xl font-semibold text-foreground`
- Кнопки справа с `gap-2 lg:gap-3`

#### Пропсы TopBar
```tsx
interface TopBarProps {
  title: string;              // Заголовок страницы
  onMenuClick?: () => void;   // Кнопка меню для мобильных
  onRefresh?: () => void;     // Умное обновление данных страницы
  leftButton?: ReactNode;     // Кнопка слева (например, "Назад")
  rightButtons?: ReactNode;   // Дополнительные кнопки справа
}
```

#### Кнопка "Обновить"
- Всегда с иконкой `RefreshCw`
- Цвет: `bg-[#0ea5e9] hover:bg-[#0ea5e9]/90`
- Текст скрыт на мобильных: `hidden sm:inline`
- Логика обновления уникальна для каждой страницы (через проп `onRefresh`)
- **Дашборд**: обновляет карточки и статистику
- **Списки (Водители, Автомобили и т.д.)**: перезагружает данные из БД
- **Формы**: кнопка отсутствует (нет смысла обновлять форму)

### Дашборд (Dashboard)
- Карточки разделов в сетке:
  - Справочники: `grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4`
  - Документы: `grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4`
- Заголовки разделов с иконками: `flex items-center gap-2`
- Карточки:
  - Hover-эффект: `hover:shadow-lg hover:border-[#0ea5e9]`
  - Иконка в плашке: `bg-[#0ea5e9]/10` с иконкой `text-[#0ea5e9]`
  - Описание: `text-sm text-muted-foreground`
  - При клике переход на страницу и открытие соответствующего раздела в сайдбаре

### Страница списка (Drivers.tsx и аналогичные)
- Пустое состояние по центру
- Иконка с прозрачностью `opacity-20`
- Текст: `text-muted-foreground`
- Центрирование: `text-center py-20`

### Форма добавления (AddDriver.tsx)
- Контент прокручивается ПОД топбаром
- Топбар остаётся на месте (`sticky top-0`)
- Область прокрутки: `overflow-y-auto`
- Контейнер: `flex-1 flex flex-col h-full`
- Форма в белой карточке с `border border-border`
- Максимальная ширина формы: `max-w-3xl mx-auto`
- Отступы контента: `p-6`

## Цвета

### Основные цвета
- Акцент (кнопки, активные элементы): `#0ea5e9` (голубой)
- Фон сайдбара: `#1a1a1a` (тёмно-серый)
- Фон страницы: `bg-background`
- Фон белых блоков: `bg-white`

### Состояния
- Hover кнопок: `hover:bg-[#0ea5e9]/90`
- Hover сайдбар: `hover:bg-white/5`
- Бордеры: `border-border`
- Приглушённый текст: `text-muted-foreground`

## Кнопки

### Основная кнопка (Primary)
```tsx
<Button className="bg-[#0ea5e9] hover:bg-[#0ea5e9]/90 text-white gap-2">
  <Icon name="IconName" size={18} />
  Текст
</Button>
```

### Кнопка отмены (Outline)
```tsx
<Button variant="outline" className="gap-2">
  <Icon name="X" size={18} />
  Отменить
</Button>
```

### Кнопка назад (Ghost)
```tsx
<Button variant="ghost" size="icon" className="hover:bg-gray-100">
  <Icon name="ArrowLeft" size={20} />
</Button>
```

### Опасная кнопка (Destructive)
```tsx
<Button className="bg-red-600 hover:bg-red-700 gap-2">
  <Icon name="LogOut" size={16} />
  Выйти без сохранения
</Button>
```

## Модальные окна

### AlertDialog (подтверждение)
- Иконка предупреждения: `AlertTriangle` с `text-orange-500`
- Заголовок с иконкой: `flex items-center gap-2`
- Описание: `text-base pt-2`
- Две кнопки: Cancel (продолжить) и Action (подтвердить)
- Action кнопка красная для опасных действий

## Формы

### Поля ввода
- Лейбл сверху со звёздочкой для обязательных: `Название *`
- Placeholder с примером: `placeholder="Иванов"`
- Сетка для полей:
  - 3 колонки для ФИО: `grid grid-cols-1 sm:grid-cols-3 gap-4`
  - 2 колонки для телефонов: `grid grid-cols-1 sm:grid-cols-2 gap-4`
  - 3 колонки для документов (серия/номер/дата): `grid grid-cols-1 sm:grid-cols-3 gap-4`
  - Полная ширина для "Кем выдан": отдельный блок вне сетки
- Отступ между полями: `space-y-2`

### Структура формы
- Белая карточка: `bg-white rounded-lg border border-border p-4 lg:p-6`
- Отступы между группами полей: `space-y-4`
- Центрирование: `max-w-3xl mx-auto`

### Секции формы
- Заголовок с иконкой: `flex items-center gap-2`
- Иконка раздела: `size={20}` с цветом `text-[#0ea5e9]`
- Примеры иконок:
  - `UserCircle` — Основная информация
  - `CreditCard` — Паспорт
  - `IdCard` — Водительское удостоверение

### Опциональные секции (добавить/удалить)
- Кнопка добавления: пунктирная рамка `border-dashed`, иконка `Plus`
- Кнопка удаления: иконка `Trash2` с hover-эффектом `hover:bg-red-50 hover:text-red-600`

## Иконки

- Использовать компонент `<Icon name="..." size={...} />`
- Размеры: 16px (маленькие), 18-20px (средние), 24px (большие), 48px (декоративные)
- Всегда добавлять иконки в кнопки с `gap-2`

## Прокрутка

- Главный контейнер: `h-screen overflow-hidden`
- Сайдбар: фиксированный, без прокрутки своего контента (или с overflow-y-auto если нужно)
- Рабочая область: `flex-1 overflow-y-auto`
- Топбар: `sticky top-0` чтобы контент заезжал под него

## Адаптивность (Responsive Design)

### Брейкпоинты Tailwind
- `sm:` - 640px и выше (мобильные горизонтально / маленькие планшеты)
- `md:` - 768px и выше (планшеты)
- `lg:` - 1024px и выше (ноутбуки/десктопы)
- `xl:` - 1280px и выше (большие мониторы)

### Сайдбар (адаптивный)
- **Мобильные (<lg)**: скрыт по умолчанию, открывается по кнопке меню
  - Фиксированная позиция: `fixed lg:static`
  - Скрыт: `-translate-x-full lg:translate-x-0`
  - Оверлей затемнения: `bg-black/50 z-40 lg:hidden`
  - Z-index: `z-50`
- **Десктоп (≥lg)**: всегда видим, статичная позиция

### Топбар (адаптивный)
- Кнопка меню (гамбургер): `lg:hidden` - только на мобильных
- Отступы: `px-4 lg:px-6` - меньше на мобильных
- Заголовки: `text-lg lg:text-xl` - меньший размер на мобильных
- Текст в кнопках: `hidden sm:inline` - иконки на мобильных, текст с планшета

### Формы (адаптивный)
- Сетка полей: `grid-cols-1 sm:grid-cols-2` - одна колонка на мобильных, две с планшета
- Отступы контейнера: `p-4 lg:p-6` - меньше на мобильных
- Заголовки секций: `text-base lg:text-lg`

### Кнопки (адаптивный)
- Текст в кнопках: `<span className="hidden sm:inline">Текст</span>`
- На мобильных остаются только иконки
- Отступы между кнопками: `gap-2 lg:gap-3`

### Правила адаптивности
1. **Mobile First**: дизайн в первую очередь для мобильных
2. **Кнопка меню**: обязательна на всех страницах с сайдбаром
3. **Пропорции**: уменьшаем отступы, размеры шрифтов на маленьких экранах
4. **Сетки**: одна колонка на мобильных, две на планшетах и выше
5. **Текст кнопок**: скрывать на мобильных, показывать с `sm:`

## Архитектура компонентов

### Переиспользуемые компоненты
1. **TopBar.tsx** — универсальный топбар для всех страниц
   - Принимает: title, onMenuClick, onRefresh, leftButton, rightButtons
   - Используется в: Index.tsx, Drivers.tsx, AddDriver.tsx и всех других страницах
   
2. **Icon.tsx** — обёртка для lucide-react иконок
   - Защита от ошибок при неверном имени иконки
   - Поддержка fallback иконок

### Структура страниц
- **Index.tsx** — главная страница с сайдбаром и роутингом страниц
  - Содержит: сайдбар, логику навигации, мобильный overlay
  - Рендерит: дашборд или подключает другие страницы (Drivers, и т.д.)
  
- **Drivers.tsx** — страница списка водителей
  - Использует: TopBar с кнопкой "Обновить" и "Добавить"
  - Переключается на: AddDriver.tsx при добавлении
  
- **AddDriver.tsx** — форма добавления водителя
  - Использует: TopBar с кнопкой "Назад" и кнопками "Отменить/Сохранить"
  - Модальное окно подтверждения отмены